<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JARVIS - AI Voice Assistant</title>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #00b4d8;
            --secondary-color: #0077b6;
            --dark-color: #03045e;
            --light-color: #caf0f8;
            --success-color: #38b000;
            --warning-color: #ffb700;
            --danger-color: #d90429;
            --gray-color: #adb5bd;
            --dark-gray: #343a40;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Loading Screen */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark-color);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading-text {
            font-size: 2rem;
            margin-bottom: 2rem;
            color: var(--primary-color);
            animation: pulse 1.5s infinite;
        }

        .loading-bar {
            width: 300px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transition: width 0.3s ease;
            animation: loading 2s ease-in-out infinite;
        }

        @keyframes loading {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: none;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 2px solid rgba(0, 180, 216, 0.3);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .logo-text h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, var(--primary-color), var(--light-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 5px;
        }

        .logo-text p {
            color: var(--gray-color);
            font-size: 0.9rem;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: rgba(0, 180, 216, 0.1);
            border-radius: 25px;
            border: 1px solid rgba(0, 180, 216, 0.3);
        }

        .status-dot {
            width: 10px;
            height: 10px;
            background: var(--success-color);
            border-radius: 50%;
            animation: status-pulse 2s infinite;
        }

        @keyframes status-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 300px 1fr 350px;
            gap: 25px;
            height: calc(100vh - 150px);
        }

        /* Left Panel - Commands */
        .commands-panel {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow-y: auto;
        }

        .panel-title {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .panel-title i {
            font-size: 1.4rem;
        }

        .command-category {
            margin-bottom: 25px;
        }

        .category-title {
            font-size: 1rem;
            color: var(--gray-color);
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .command-list {
            list-style: none;
        }

        .command-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .command-item:hover {
            background: rgba(0, 180, 216, 0.1);
            transform: translateX(5px);
        }

        .command-item i {
            color: var(--primary-color);
        }

        .command-shortcut {
            margin-left: auto;
            color: var(--gray-color);
            font-size: 0.8rem;
        }

        /* Center Panel - Chat Interface */
        .chat-panel {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chat-title {
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        .chat-controls {
            display: flex;
            gap: 10px;
        }

        .control-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0, 180, 216, 0.1);
            border: 1px solid rgba(0, 180, 216, 0.3);
            color: var(--primary-color);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            background: rgba(0, 180, 216, 0.2);
            transform: scale(1.1);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
            margin-bottom: 20px;
        }

        .message {
            margin-bottom: 20px;
            animation: messageSlide 0.3s ease;
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message-user {
            text-align: right;
        }

        .message-jarvis {
            text-align: left;
        }

        .message-content {
            display: inline-block;
            padding: 15px 20px;
            border-radius: 20px;
            max-width: 80%;
            position: relative;
        }

        .user-message {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-bottom-right-radius: 5px;
        }

        .jarvis-message {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border-bottom-left-radius: 5px;
        }

        .message-time {
            font-size: 0.8rem;
            color: var(--gray-color);
            margin-top: 5px;
            margin-left: 20px;
        }

        .message-user .message-time {
            text-align: right;
            margin-right: 20px;
        }

        .message-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .user-avatar {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
        }

        .jarvis-avatar {
            background: linear-gradient(45deg, #ffb700, #ff9500);
        }

        .chat-input-container {
            position: relative;
        }

        .chat-input {
            width: 100%;
            padding: 20px 80px 20px 25px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            color: white;
            font-size: 1rem;
            resize: none;
            min-height: 60px;
            max-height: 120px;
            transition: var(--transition);
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--primary-color);
            background: rgba(255, 255, 255, 0.08);
        }

        .chat-input-controls {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 10px;
        }

        .input-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            color: white;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .input-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(0, 180, 216, 0.5);
        }

        .input-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Right Panel - Info and Settings */
        .info-panel {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow-y: auto;
        }

        .info-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }

        .tab-btn {
            flex: 1;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            border-radius: 10px;
            color: var(--gray-color);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            font-size: 0.9rem;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Stats Panel */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.08);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(45deg, var(--primary-color), var(--light-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--gray-color);
        }

        /* Settings Panel */
        .setting-group {
            margin-bottom: 25px;
        }

        .setting-title {
            font-size: 1rem;
            color: var(--primary-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .setting-label {
            color: white;
        }

        .setting-description {
            font-size: 0.8rem;
            color: var(--gray-color);
            margin-top: 5px;
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 25px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray-color);
            transition: var(--transition);
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 17px;
            width: 17px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: var(--transition);
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }

        input:checked + .toggle-slider:before {
            transform: translateX(25px);
        }

        /* Slider */
        .slider-container {
            width: 200px;
        }

        .slider-value {
            display: inline-block;
            width: 40px;
            text-align: center;
            color: var(--primary-color);
            font-weight: bold;
        }

        input[type="range"] {
            width: 150px;
            height: 5px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            border: 2px solid white;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 20px;
            padding: 40px;
            width: 90%;
            max-width: 500px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            animation: modalSlide 0.3s ease;
        }

        @keyframes modalSlide {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .modal-title {
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--gray-color);
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--danger-color);
        }

        .modal-body {
            margin-bottom: 30px;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }

        .btn {
            padding: 12px 30px;
            border-radius: 10px;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 180, 216, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Notifications */
        .notification {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            max-width: 400px;
            z-index: 100;
            animation: notificationSlide 0.3s ease;
            box-shadow: var(--shadow);
        }

        @keyframes notificationSlide {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .notification.hiding {
            animation: notificationHide 0.3s ease forwards;
        }

        @keyframes notificationHide {
            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 250px 1fr 300px;
            }
        }

        @media (max-width: 992px) {
            .main-layout {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr auto;
                height: auto;
            }
            
            .commands-panel, .info-panel {
                height: 300px;
            }
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .chat-input-controls {
                position: static;
                transform: none;
                margin-top: 10px;
                justify-content: center;
            }
            
            .chat-input {
                padding: 15px;
            }
        }

        /* Animation Classes */
        .pulse {
            animation: pulse 1.5s infinite;
        }

        .shake {
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--secondary-color), var(--dark-color));
        }

        /* Selection Color */
        ::selection {
            background: rgba(0, 180, 216, 0.3);
            color: white;
        }
        /* Additional style for color options */
        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s;
            border: 2px solid transparent;
        }
        .color-option:hover {
            transform: scale(1.2);
            border-color: white;
        }
    </style>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-text">Initializing JARVIS Systems...</div>
        <div class="loading-bar">
            <div class="loading-progress"></div>
        </div>
        <div style="margin-top: 20px; color: var(--gray-color); font-size: 0.9rem;">
            <span id="loading-step">Loading core modules...</span>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="logo-text">
                    <h1>JARVIS</h1>
                    <p>Just A Rather Very Intelligent System</p>
                </div>
            </div>
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span>System: <strong>Online</strong></span>
            </div>
        </header>

        <!-- Main Layout -->
        <div class="main-layout">
            <!-- Left Panel - Commands -->
            <div class="commands-panel">
                <div class="panel-title">
                    <i class="fas fa-terminal"></i>
                    Quick Commands
                </div>
                
                <div class="command-category">
                    <div class="category-title">BASIC COMMANDS</div>
                    <ul class="command-list">
                        <li class="command-item" onclick="sendCommand('time')">
                            <i class="fas fa-clock"></i>
                            <span>Get Current Time</span>
                            <span class="command-shortcut">Ctrl+T</span>
                        </li>
                        <li class="command-item" onclick="sendCommand('date')">
                            <i class="fas fa-calendar-alt"></i>
                            <span>Get Today's Date</span>
                            <span class="command-shortcut">Ctrl+D</span>
                        </li>
                        <li class="command-item" onclick="sendCommand('help')">
                            <i class="fas fa-question-circle"></i>
                            <span>Show Help</span>
                            <span class="command-shortcut">Ctrl+H</span>
                        </li>
                    </ul>
                </div>

                <div class="command-category">
                    <div class="category-title">WEB COMMANDS</div>
                    <ul class="command-list">
                        <li class="command-item" onclick="sendCommand('open google')">
                            <i class="fab fa-google"></i>
                            <span>Open Google</span>
                        </li>
                        <li class="command-item" onclick="sendCommand('open youtube')">
                            <i class="fab fa-youtube"></i>
                            <span>Open YouTube</span>
                        </li>
                        <li class="command-item" onclick="sendCommand('open github')">
                            <i class="fab fa-github"></i>
                            <span>Open GitHub</span>
                        </li>
                    </ul>
                </div>

                <div class="command-category">
                    <div class="category-title">MEDIA & ENTERTAINMENT</div>
                    <ul class="command-list">
                        <li class="command-item" onclick="sendCommand('play music')">
                            <i class="fas fa-music"></i>
                            <span>Play Music</span>
                        </li>
                        <li class="command-item" onclick="sendCommand('tell me a joke')">
                            <i class="fas fa-laugh-beam"></i>
                            <span>Tell a Joke</span>
                        </li>
                        <li class="command-item" onclick="sendCommand('random fact')">
                            <i class="fas fa-lightbulb"></i>
                            <span>Random Fact</span>
                        </li>
                    </ul>
                </div>

                <div class="command-category">
                    <div class="category-title">PRODUCTIVITY</div>
                    <ul class="command-list">
                        <li class="command-item" onclick="openNoteModal()">
                            <i class="fas fa-sticky-note"></i>
                            <span>Take a Note</span>
                            <span class="command-shortcut">Ctrl+N</span>
                        </li>
                        <li class="command-item" onclick="openReminderModal()">
                            <i class="fas fa-bell"></i>
                            <span>Set Reminder</span>
                            <span class="command-shortcut">Ctrl+R</span>
                        </li>
                        <li class="command-item" onclick="sendCommand('read notes')">
                            <i class="fas fa-book-open"></i>
                            <span>Read Notes</span>
                        </li>
                    </ul>
                </div>

                <div class="command-category">
                    <div class="category-title">INFORMATION</div>
                    <ul class="command-list">
                        <li class="command-item" onclick="openWikipediaModal()">
                            <i class="fab fa-wikipedia-w"></i>
                            <span>Wikipedia Search</span>
                            <span class="command-shortcut">Ctrl+W</span>
                        </li>
                        <li class="command-item" onclick="sendCommand('weather')">
                            <i class="fas fa-cloud-sun"></i>
                            <span>Weather Forecast</span>
                        </li>
                        <li class="command-item" onclick="sendCommand('news')">
                            <i class="fas fa-newspaper"></i>
                            <span>Latest News</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Center Panel - Chat Interface -->
            <div class="chat-panel">
                <div class="chat-header">
                    <div class="chat-title">
                        <i class="fas fa-comments"></i> Conversation with JARVIS
                    </div>
                    <div class="chat-controls">
                        <button class="control-btn" onclick="clearChat()" title="Clear Chat">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                        <button class="control-btn" onclick="exportChat()" title="Export Chat">
                            <i class="fas fa-download"></i>
                        </button>
                        <button class="control-btn" onclick="toggleVoiceInput()" id="voice-toggle" title="Toggle Voice Input">
                            <i class="fas fa-microphone"></i>
                        </button>
                    </div>
                </div>

                <div class="chat-messages" id="chat-messages">
                    <!-- Messages will be inserted here -->
                    <div class="message message-jarvis">
                        <div class="message-avatar jarvis-avatar">J</div>
                        <div class="message-content jarvis-message">
                            Hello! I'm JARVIS, your AI assistant. How can I help you today?
                        </div>
                        <div class="message-time">Just now</div>
                    </div>
                </div>

                <div class="chat-input-container">
                    <textarea class="chat-input" id="chat-input" 
                              placeholder="Type your command here or click the microphone for voice input... Press Enter to send, Shift+Enter for new line"
                              rows="1"></textarea>
                    <div class="chat-input-controls">
                        <button class="input-btn" onclick="sendMessage()" id="send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                        <button class="input-btn" onclick="toggleListening()" id="voice-btn">
                            <i class="fas fa-microphone"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Info and Settings -->
            <div class="info-panel">
                <div class="info-tabs">
                    <button class="tab-btn active" onclick="switchTab('stats', event)">
                        <i class="fas fa-chart-bar"></i> Stats
                    </button>
                    <button class="tab-btn" onclick="switchTab('settings', event)">
                        <i class="fas fa-cog"></i> Settings
                    </button>
                    <button class="tab-btn" onclick="switchTab('about', event)">
                        <i class="fas fa-info-circle"></i> About
                    </button>
                </div>

                <!-- Stats Tab -->
                <div class="tab-content active" id="stats-tab">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="commands-count">0</div>
                            <div class="stat-label">Commands Processed</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="session-time">0m</div>
                            <div class="stat-label">Session Duration</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="notes-count">0</div>
                            <div class="stat-label">Notes Saved</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="reminders-count">0</div>
                            <div class="stat-label">Active Reminders</div>
                        </div>
                    </div>

                    <div class="panel-title">
                        <i class="fas fa-history"></i>
                        Recent Activity
                    </div>
                    <div id="recent-activity">
                        <div style="color: var(--gray-color); text-align: center; padding: 20px;">
                            No recent activity yet
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div class="tab-content" id="settings-tab">
                    <div class="setting-group">
                        <div class="setting-title">
                            <i class="fas fa-volume-up"></i>
                            Voice Settings
                        </div>
                        
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Voice Speed</div>
                                <div class="setting-description">Adjust how fast I speak</div>
                            </div>
                            <div class="slider-container">
                                <input type="range" min="50" max="300" value="150" id="voice-speed">
                                <span class="slider-value" id="speed-value">150</span>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Voice Volume</div>
                                <div class="setting-description">Adjust my speaking volume</div>
                            </div>
                            <div class="slider-container">
                                <input type="range" min="0" max="100" value="100" id="voice-volume">
                                <span class="slider-value" id="volume-value">100%</span>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Voice Type</div>
                                <div class="setting-description">Choose preferred voice</div>
                            </div>
                            <select id="voice-type" style="background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); padding: 8px 15px; border-radius: 8px;">
                                <option value="male">Male Voice</option>
                                <option value="female">Female Voice</option>
                                <option value="robot">Robot Voice</option>
                            </select>
                        </div>
                    </div>

                    <div class="setting-group">
                        <div class="setting-title">
                            <i class="fas fa-bell"></i>
                            Notifications
                        </div>
                        
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Enable Sounds</div>
                                <div class="setting-description">Play sounds for notifications</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="sound-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Desktop Notifications</div>
                                <div class="setting-description">Show browser notifications</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="desktop-notifications">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>

                    <div class="setting-group">
                        <div class="setting-title">
                            <i class="fas fa-palette"></i>
                            Appearance
                        </div>
                        
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Dark Mode</div>
                                <div class="setting-description">Toggle dark/light theme</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="dark-mode" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Theme Color</div>
                                <div class="setting-description">Choose primary color</div>
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <div class="color-option" style="background: #00b4d8;" onclick="setThemeColor('#00b4d8')"></div>
                                <div class="color-option" style="background: #38b000;" onclick="setThemeColor('#38b000')"></div>
                                <div class="color-option" style="background: #ffb700;" onclick="setThemeColor('#ffb700')"></div>
                                <div class="color-option" style="background: #d90429;" onclick="setThemeColor('#d90429')"></div>
                                <div class="color-option" style="background: #8338ec;" onclick="setThemeColor('#8338ec')"></div>
                            </div>
                        </div>
                    </div>

                    <button class="btn btn-secondary" style="width: 100%; margin-top: 20px;" onclick="resetSettings()">
                        <i class="fas fa-redo"></i> Reset to Defaults
                    </button>
                </div>

                <!-- About Tab -->
                <div class="tab-content" id="about-tab">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <div style="width: 100px; height: 100px; background: linear-gradient(45deg, var(--primary-color), var(--secondary-color)); border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 40px;">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h3 style="color: var(--primary-color); margin-bottom: 10px;">JARVIS v2.0</h3>
                        <p style="color: var(--gray-color);">Just A Rather Very Intelligent System</p>
                    </div>

                    <div class="setting-group">
                        <div class="setting-title">
                            <i class="fas fa-code"></i>
                            Technical Information
                        </div>
                        
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Version</div>
                                <div class="setting-description">2.0.1</div>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Build Date</div>
                                <div class="setting-description" id="build-date"></div>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Browser Support</div>
                                <div class="setting-description">Chrome, Firefox, Edge, Safari</div>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Web Technologies</div>
                                <div class="setting-description">HTML5, CSS3, JavaScript, Web Speech API</div>
                            </div>
                        </div>
                    </div>

                    <div class="setting-group">
                        <div class="setting-title">
                            <i class="fas fa-handshake"></i>
                            Support & Feedback
                        </div>
                        
                        <div style="padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px; margin-bottom: 15px;">
                            <p style="margin-bottom: 10px;">Found a bug or have a suggestion?</p>
                            <button class="btn btn-primary" style="width: 100%;" onclick="openFeedbackModal()">
                                <i class="fas fa-comment-dots"></i> Send Feedback
                            </button>
                        </div>

                        <div style="display: flex; gap: 15px; justify-content: center;">
                            <button class="control-btn" onclick="window.open('https://github.com', '_blank')">
                                <i class="fab fa-github"></i>
                            </button>
                            <button class="control-btn" onclick="window.open('https://twitter.com', '_blank')">
                                <i class="fab fa-twitter"></i>
                            </button>
                            <button class="control-btn" onclick="window.open('https://discord.com', '_blank')">
                                <i class="fab fa-discord"></i>
                            </button>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 30px; color: var(--gray-color); font-size: 0.8rem;">
                        <p>Â© 2024 JARVIS AI Assistant. All rights reserved.</p>
                        <p>Made with <i class="fas fa-heart" style="color: var(--danger-color);"></i> for the AI community</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    
    <!-- Note Modal -->
    <div class="modal" id="note-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-sticky-note"></i> Take a Note
                </div>
                <button class="modal-close" onclick="closeNoteModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <textarea id="note-text" placeholder="Type your note here..." style="width: 100%; height: 150px; padding: 15px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 10px; color: white; font-size: 1rem; resize: vertical;"></textarea>
                <div style="margin-top: 15px;">
                    <label style="color: var(--gray-color); font-size: 0.9rem;">Add tags (comma separated):</label>
                    <input type="text" id="note-tags" placeholder="work, important, ideas" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; margin-top: 5px;">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeNoteModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveNote()">Save Note</button>
            </div>
        </div>
    </div>

    <!-- Reminder Modal -->
    <div class="modal" id="reminder-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-bell"></i> Set Reminder
                </div>
                <button class="modal-close" onclick="closeReminderModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 20px;">
                    <label style="color: var(--gray-color); font-size: 0.9rem;">Reminder Text:</label>
                    <input type="text" id="reminder-text" placeholder="What should I remind you about?" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; margin-top: 5px;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="color: var(--gray-color); font-size: 0.9rem;">When:</label>
                    <div style="display: flex; gap: 10px; margin-top: 5px;">
                        <select id="reminder-time" style="flex: 1; padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                            <option value="5">In 5 minutes</option>
                            <option value="15">In 15 minutes</option>
                            <option value="30">In 30 minutes</option>
                            <option value="60">In 1 hour</option>
                            <option value="custom">Custom time</option>
                        </select>
                        <input type="datetime-local" id="custom-time" style="flex: 1; padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; display: none;">
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="color: var(--gray-color); font-size: 0.9rem;">Repeat:</label>
                    <select id="reminder-repeat" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; margin-top: 5px;">
                        <option value="none">Don't repeat</option>
                        <option value="daily">Daily</option>
                        <option value="weekly">Weekly</option>
                        <option value="monthly">Monthly</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeReminderModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveReminder()">Set Reminder</button>
            </div>
        </div>
    </div>

    <!-- Wikipedia Modal -->
    <div class="modal" id="wikipedia-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fab fa-wikipedia-w"></i> Wikipedia Search
                </div>
                <button class="modal-close" onclick="closeWikipediaModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 20px;">
                    <label style="color: var(--gray-color); font-size: 0.9rem;">Search Term:</label>
                    <input type="text" id="wiki-search" placeholder="Enter topic to search on Wikipedia..." style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; margin-top: 5px;">
                </div>
                <div id="wiki-results" style="max-height: 300px; overflow-y: auto; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 8px; display: none;">
                    <!-- Results will be inserted here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeWikipediaModal()">Cancel</button>
                <button class="btn btn-primary" onclick="searchWikipedia()">Search</button>
            </div>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div class="modal" id="feedback-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-comment-dots"></i> Send Feedback
                </div>
                <button class="modal-close" onclick="closeFeedbackModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 20px;">
                    <label style="color: var(--gray-color); font-size: 0.9rem;">Feedback Type:</label>
                    <select id="feedback-type" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; margin-top: 5px;">
                        <option value="bug">Bug Report</option>
                        <option value="feature">Feature Request</option>
                        <option value="suggestion">Suggestion</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="color: var(--gray-color); font-size: 0.9rem;">Your Feedback:</label>
                    <textarea id="feedback-text" placeholder="Please describe your feedback in detail..." style="width: 100%; height: 150px; padding: 15px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 10px; color: white; font-size: 1rem; resize: vertical; margin-top: 5px;"></textarea>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="color: var(--gray-color); font-size: 0.9rem;">Email (optional):</label>
                    <input type="email" id="feedback-email" placeholder="your@email.com" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; margin-top: 5px;">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeFeedbackModal()">Cancel</button>
                <button class="btn btn-primary" onclick="submitFeedback()">Send Feedback</button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification" style="display: none;">
        <i class="fas fa-check-circle" id="notification-icon"></i>
        <div>
            <div id="notification-title">Notification</div>
            <div id="notification-message" style="font-size: 0.9rem; opacity: 0.8;"></div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Global Variables
        let isListening = false;
        let commandsCount = 0;
        let sessionStartTime = new Date();
        let notesCount = 0;
        let remindersCount = 0;
        let voiceEnabled = false;
        let recognition = null;
        let speechSynthesis = window.speechSynthesis;
        let currentVoice = null;

        // DOM Elements
        const loadingScreen = document.getElementById('loading-screen');
        const container = document.querySelector('.container');
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const sendBtn = document.getElementById('send-btn');
        const voiceBtn = document.getElementById('voice-btn');
        const voiceToggle = document.getElementById('voice-toggle');
        const commandsCountEl = document.getElementById('commands-count');
        const sessionTimeEl = document.getElementById('session-time');
        const notesCountEl = document.getElementById('notes-count');
        const remindersCountEl = document.getElementById('reminders-count');
        const voiceSpeedSlider = document.getElementById('voice-speed');
        const voiceVolumeSlider = document.getElementById('voice-volume');
        const speedValue = document.getElementById('speed-value');
        const volumeValue = document.getElementById('volume-value');
        const voiceTypeSelect = document.getElementById('voice-type');
        const notification = document.getElementById('notification');

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Simulate loading
            simulateLoading();
            
            // Set current date
            document.getElementById('build-date').textContent = new Date().toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // Load settings from localStorage
            loadSettings();
            
            // Initialize Web Speech API
            initSpeechRecognition();
            
            // Setup event listeners
            setupEventListeners();
            
            // Update session timer
            setInterval(updateSessionTime, 60000);
            updateSessionTime();
            
            // Check for reminders
            setInterval(checkReminders, 30000);
            
            // Initialize color options (already in html)
        });

        // Simulate loading process
        function simulateLoading() {
            const steps = [
                "Initializing core modules...",
                "Loading AI models...",
                "Setting up voice systems...",
                "Connecting to services...",
                "Preparing user interface...",
                "Finalizing setup..."
            ];
            
            let currentStep = 0;
            const loadingStep = document.getElementById('loading-step');
            
            const interval = setInterval(() => {
                if (currentStep < steps.length) {
                    loadingStep.textContent = steps[currentStep];
                    currentStep++;
                } else {
                    clearInterval(interval);
                    // Hide loading screen after a delay
                    setTimeout(() => {
                        loadingScreen.style.opacity = '0';
                        setTimeout(() => {
                            loadingScreen.style.display = 'none';
                            container.style.display = 'block';
                            // Add initial welcome message
                            addMessage('jarvis', "Welcome! I'm JARVIS, your AI assistant. Type 'help' to see what I can do.");
                        }, 500);
                    }, 1000);
                }
            }, 1000);
        }

        // Initialize Web Speech API
        function initSpeechRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';
                
                recognition.onstart = function() {
                    voiceBtn.innerHTML = '<i class="fas fa-microphone-slash"></i>';
                    voiceBtn.style.background = 'linear-gradient(135deg, #d90429, #ef233c)';
                    showNotification("Voice Recognition", "Listening...", "info");
                };
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    chatInput.value = transcript;
                    voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
                    voiceBtn.style.background = '';
                    sendMessage();
                };
                
                recognition.onerror = function(event) {
                    console.error('Speech recognition error:', event.error);
                    voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
                    voiceBtn.style.background = '';
                    showNotification("Voice Recognition", "Error: " + event.error, "error");
                };
                
                recognition.onend = function() {
                    if (isListening) {
                        // Restart listening if it was manually started and not stopped
                        // But to avoid infinite loops, we set isListening false first then restart?
                        // Actually better to handle this with a flag: if still wanting to listen, restart
                        if (isListening) { 
                            try {
                                recognition.start();
                            } catch (e) {}
                        } else {
                            voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
                            voiceBtn.style.background = '';
                        }
                    } else {
                        voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
                        voiceBtn.style.background = '';
                    }
                };
                
                voiceEnabled = true;
                voiceToggle.innerHTML = '<i class="fas fa-microphone"></i>';
            } else {
                voiceEnabled = false;
                voiceToggle.innerHTML = '<i class="fas fa-microphone-slash"></i>';
                voiceToggle.title = "Voice not supported in this browser";
                showNotification("Voice Recognition", "Your browser doesn't support speech recognition", "warning");
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // Chat input handling
            chatInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
                
                // Auto-resize textarea
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
            });
            
            // Send button click
            sendBtn.addEventListener('click', sendMessage);
            
            // Voice button click
            voiceBtn.addEventListener('click', toggleListening);
            
            // Voice toggle in header
            voiceToggle.addEventListener('click', toggleVoiceInput);
            
            // Voice settings sliders
            voiceSpeedSlider.addEventListener('input', function() {
                speedValue.textContent = this.value;
                saveSettings();
            });
            
            voiceVolumeSlider.addEventListener('input', function() {
                volumeValue.textContent = this.value + '%';
                saveSettings();
            });
            
            // Voice type selection
            voiceTypeSelect.addEventListener('change', saveSettings);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                // Ctrl+H for help
                if (e.ctrlKey && e.key === 'h') {
                    e.preventDefault();
                    sendCommand('help');
                }
                
                // Ctrl+T for time
                if (e.ctrlKey && e.key === 't') {
                    e.preventDefault();
                    sendCommand('time');
                }
                
                // Ctrl+D for date
                if (e.ctrlKey && e.key === 'd') {
                    e.preventDefault();
                    sendCommand('date');
                }
                
                // Ctrl+N for note
                if (e.ctrlKey && e.key === 'n') {
                    e.preventDefault();
                    openNoteModal();
                }
                
                // Ctrl+R for reminder
                if (e.ctrlKey && e.key === 'r') {
                    e.preventDefault();
                    openReminderModal();
                }
                
                // Ctrl+W for Wikipedia
                if (e.ctrlKey && e.key === 'w') {
                    e.preventDefault();
                    openWikipediaModal();
                }
                
                // Escape to stop listening
                if (e.key === 'Escape' && isListening) {
                    toggleListening();
                }
            });
        }

        // Send message from chat input
        function sendMessage() {
            const message = chatInput.value.trim();
            if (!message) return;
            
            // Add user message to chat
            addMessage('user', message);
            
            // Clear input
            chatInput.value = '';
            chatInput.style.height = 'auto';
            
            // Process command
            processCommand(message);
        }

        // Process command and generate response
        function processCommand(command) {
            commandsCount++;
            commandsCountEl.textContent = commandsCount;
            
            // Add to recent activity
            addRecentActivity(command);
            
            // Convert command to lowercase for easier processing
            const cmd = command.toLowerCase().trim();
            
            // Simulate processing delay
            setTimeout(() => {
                let response = "";
                
                // Basic commands
                if (cmd.includes('hello') || cmd.includes('hi') || cmd.includes('hey')) {
                    response = getRandomResponse([
                        "Hello! How can I assist you today?",
                        "Hi there! What can I do for you?",
                        "Hey! Ready to help!"
                    ]);
                }
                else if (cmd.includes('time') || cmd.includes('what time')) {
                    const now = new Date();
                    const time = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true });
                    response = `The current time is ${time}`;
                }
                else if (cmd.includes('date') || cmd.includes('what date') || cmd.includes('today')) {
                    const now = new Date();
                    const date = now.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
                    response = `Today is ${date}`;
                }
                else if (cmd.includes('help')) {
                    response = "I can help you with: time, date, weather, news, calculations, notes, reminders, and more! You can also click on the quick commands in the left panel.";
                }
                else if (cmd.includes('who are you') || cmd.includes('your name')) {
                    response = "I'm JARVIS (Just A Rather Very Intelligent System), your AI assistant created to help with various tasks.";
                }
                else if (cmd.includes('how are you')) {
                    response = getRandomResponse([
                        "I'm functioning optimally! How can I assist you?",
                        "All systems are operational! What can I do for you?",
                        "I'm doing great! Ready to help!"
                    ]);
                }
                else if (cmd.includes('thank you') || cmd.includes('thanks')) {
                    response = getRandomResponse([
                        "You're welcome!",
                        "Happy to help!",
                        "My pleasure!"
                    ]);
                }
                // Web commands
                else if (cmd.includes('open google')) {
                    response = "Opening Google in a new tab...";
                    window.open('https://www.google.com', '_blank');
                }
                else if (cmd.includes('open youtube')) {
                    response = "Opening YouTube in a new tab...";
                    window.open('https://www.youtube.com', '_blank');
                }
                else if (cmd.includes('open github')) {
                    response = "Opening GitHub in a new tab...";
                    window.open('https://www.github.com', '_blank');
                }
                else if (cmd.includes('open ') && cmd.split(' ').length > 1) {
                    const site = cmd.replace('open ', '').trim();
                    response = `Opening ${site} in a new tab...`;
                    window.open(`https://www.${site}.com`, '_blank');
                }
                // Media commands
                else if (cmd.includes('play music')) {
                    response = "Music playback requires integration with a streaming service. You can upload music files to use this feature.";
                }
                else if (cmd.includes('joke') || cmd.includes('funny')) {
                    response = getRandomJoke();
                }
                else if (cmd.includes('fact') || cmd.includes('random fact')) {
                    response = getRandomFact();
                }
                // Information commands
                else if (cmd.includes('weather')) {
                    response = "To get accurate weather information, I need access to a weather API. For now, you can check weather.com for current conditions.";
                }
                else if (cmd.includes('news')) {
                    response = "I can fetch news headlines when configured with a news API. Try 'open news.google.com' for the latest news.";
                }
                else if (cmd.includes('calculate') || (cmd.includes('what is') && (cmd.includes('+') || cmd.includes('-') || cmd.includes('*') || cmd.includes('/')))) {
                    response = calculateExpression(cmd);
                }
                // Default response for unknown commands
                else {
                    response = getRandomResponse([
                        "I'm not sure I understand. Try asking for 'time', 'date', or type 'help' for more options.",
                        "I didn't catch that. Could you try a different command?",
                        "I'm still learning! Try one of the commands in the left panel."
                    ]);
                }
                
                // Add JARVIS response
                addMessage('jarvis', response);
                
                // Speak the response if voice is enabled
                if (voiceEnabled && document.getElementById('sound-toggle').checked) {
                    speak(response);
                }
                
            }, 500); // Simulate processing delay
        }

        // Send command directly (for quick commands)
        function sendCommand(command) {
            chatInput.value = command;
            sendMessage();
        }

        // Add message to chat
        function addMessage(sender, text) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message message-${sender}`;
            
            const now = new Date();
            const time = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
            
            let avatar = '';
            let messageClass = '';
            
            if (sender === 'user') {
                avatar = '<div class="message-avatar user-avatar">U</div>';
                messageClass = 'user-message';
            } else {
                avatar = '<div class="message-avatar jarvis-avatar">J</div>';
                messageClass = 'jarvis-message';
            }
            
            messageDiv.innerHTML = `
                ${avatar}
                <div class="message-content ${messageClass}">
                    ${text}
                </div>
                <div class="message-time">${time}</div>
            `;
            
            chatMessages.appendChild(messageDiv);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Clear chat
        function clearChat() {
            if (confirm("Are you sure you want to clear the chat?")) {
                chatMessages.innerHTML = `
                    <div class="message message-jarvis">
                        <div class="message-avatar jarvis-avatar">J</div>
                        <div class="message-content jarvis-message">
                            Chat cleared. How can I help you?
                        </div>
                        <div class="message-time">Just now</div>
                    </div>
                `;
            }
        }

        // Export chat
        function exportChat() {
            const messages = chatMessages.querySelectorAll('.message');
            let chatText = "JARVIS Chat Export\n";
            chatText += "===================\n\n";
            
            messages.forEach(msg => {
                const sender = msg.classList.contains('message-user') ? 'You' : 'JARVIS';
                const content = msg.querySelector('.message-content').textContent;
                const time = msg.querySelector('.message-time').textContent;
                
                chatText += `[${time}] ${sender}: ${content}\n`;
            });
            
            const blob = new Blob([chatText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `jarvis-chat-${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification("Chat Export", "Chat exported successfully!", "success");
        }

        // Toggle voice listening
        function toggleListening() {
            if (!voiceEnabled || !recognition) {
                showNotification("Voice Recognition", "Voice recognition is not available in your browser", "warning");
                return;
            }
            
            if (isListening) {
                isListening = false;
                recognition.stop();
                voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
                voiceBtn.style.background = '';
                showNotification("Voice Recognition", "Stopped listening", "info");
            } else {
                try {
                    isListening = true;
                    recognition.start();
                } catch (e) {
                    console.error("Error starting recognition:", e);
                    showNotification("Voice Recognition", "Error starting voice recognition", "error");
                }
            }
        }

        // Toggle voice input globally
        function toggleVoiceInput() {
            if (voiceEnabled) {
                voiceEnabled = false;
                voiceToggle.innerHTML = '<i class="fas fa-microphone-slash"></i>';
                voiceToggle.title = "Voice input disabled";
                showNotification("Voice Input", "Voice input disabled", "info");
                
                if (isListening) {
                    toggleListening();
                }
            } else {
                voiceEnabled = true;
                voiceToggle.innerHTML = '<i class="fas fa-microphone"></i>';
                voiceToggle.title = "Voice input enabled";
                showNotification("Voice Input", "Voice input enabled", "success");
            }
        }

        // Speak text using Web Speech API
        function speak(text) {
            if (!speechSynthesis) {
                console.warn("Speech synthesis not supported");
                return;
            }
            
            // Cancel any ongoing speech
            speechSynthesis.cancel();
            
            const utterance = new SpeechSynthesisUtterance(text);
            
            // Set voice properties from settings
            utterance.rate = parseInt(voiceSpeedSlider.value) / 100;
            utterance.volume = parseInt(voiceVolumeSlider.value) / 100;
            utterance.pitch = 1;
            
            // Try to set voice type
            const voices = speechSynthesis.getVoices();
            if (voices.length > 0) {
                const voiceType = voiceTypeSelect.value;
                let preferredVoice = null;
                
                if (voiceType === 'female') {
                    preferredVoice = voices.find(v => v.name.includes('Female') || v.name.includes('woman') || v.name.includes('Woman'));
                } else if (voiceType === 'male') {
                    preferredVoice = voices.find(v => v.name.includes('Male') || v.name.includes('man') || v.name.includes('Man'));
                } else if (voiceType === 'robot') {
                    // For robot voice, we'll adjust rate and pitch
                    utterance.rate = 0.8;
                    utterance.pitch = 0.5;
                }
                
                if (preferredVoice) {
                    utterance.voice = preferredVoice;
                }
            }
            
            speechSynthesis.speak(utterance);
        }

        // Switch between tabs
        function switchTab(tabName, event) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            // Add active class to clicked button
            if (event && event.target) {
                event.target.classList.add('active');
            }
        }

        // Open note modal
        function openNoteModal() {
            document.getElementById('note-modal').style.display = 'flex';
        }

        // Close note modal
        function closeNoteModal() {
            document.getElementById('note-modal').style.display = 'none';
            document.getElementById('note-text').value = '';
            document.getElementById('note-tags').value = '';
        }

        // Save note
        function saveNote() {
            const text = document.getElementById('note-text').value.trim();
            if (!text) {
                showNotification("Note", "Please enter note text", "warning");
                return;
            }
            
            const tags = document.getElementById('note-tags').value.split(',').map(tag => tag.trim()).filter(tag => tag);
            
            // In a real app, you would save to backend/localStorage
            notesCount++;
            notesCountEl.textContent = notesCount;
            
            closeNoteModal();
            showNotification("Note", "Note saved successfully!", "success");
            
            // Add to recent activity
            addRecentActivity("Created a note");
        }

        // Open reminder modal
        function openReminderModal() {
            document.getElementById('reminder-modal').style.display = 'flex';
            
            // Set default time to 30 minutes from now
            const now = new Date();
            now.setMinutes(now.getMinutes() + 30);
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            document.getElementById('custom-time').value = `${year}-${month}-${day}T${hours}:${minutes}`;
            
            // Remove previous listener to avoid duplicates
            const reminderSelect = document.getElementById('reminder-time');
            const customTimeInput = document.getElementById('custom-time');
            reminderSelect.onchange = function() {
                customTimeInput.style.display = this.value === 'custom' ? 'block' : 'none';
            };
        }

        // Close reminder modal
        function closeReminderModal() {
            document.getElementById('reminder-modal').style.display = 'none';
            document.getElementById('reminder-text').value = '';
        }

        // Save reminder
        function saveReminder() {
            const text = document.getElementById('reminder-text').value.trim();
            if (!text) {
                showNotification("Reminder", "Please enter reminder text", "warning");
                return;
            }
            
            const timeOption = document.getElementById('reminder-time').value;
            const repeat = document.getElementById('reminder-repeat').value;
            
            let reminderTime = new Date();
            
            if (timeOption === 'custom') {
                const customTime = document.getElementById('custom-time').value;
                if (!customTime) {
                    showNotification("Reminder", "Please select a time", "warning");
                    return;
                }
                reminderTime = new Date(customTime);
            } else {
                reminderTime.setMinutes(reminderTime.getMinutes() + parseInt(timeOption));
            }
            
            // In a real app, you would save to backend/localStorage
            remindersCount++;
            remindersCountEl.textContent = remindersCount;
            
            closeReminderModal();
            showNotification("Reminder", `Reminder set for ${reminderTime.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`, "success");
            
            // Add to recent activity
            addRecentActivity("Set a reminder");
        }

        // Check for due reminders
        function checkReminders() {
            // In a real app, you would check stored reminders
            // This is just a placeholder
            if (remindersCount > 0 && Math.random() > 0.7) {
                // Simulate occasional reminder notification
                showNotification("Reminder", "You have a reminder: Check your tasks!", "info");
            }
        }

        // Open Wikipedia modal
        function openWikipediaModal() {
            document.getElementById('wikipedia-modal').style.display = 'flex';
        }

        // Close Wikipedia modal
        function closeWikipediaModal() {
            document.getElementById('wikipedia-modal').style.display = 'none';
            document.getElementById('wiki-search').value = '';
            document.getElementById('wiki-results').style.display = 'none';
            document.getElementById('wiki-results').innerHTML = '';
        }

        // Search Wikipedia
        function searchWikipedia() {
            const searchTerm = document.getElementById('wiki-search').value.trim();
            if (!searchTerm) {
                showNotification("Wikipedia", "Please enter a search term", "warning");
                return;
            }
            
            const resultsDiv = document.getElementById('wiki-results');
            resultsDiv.innerHTML = '<div style="text-align: center; padding: 20px; color: var(--gray-color);"><i class="fas fa-spinner fa-spin"></i> Searching Wikipedia...</div>';
            resultsDiv.style.display = 'block';
            
            // In a real app, you would make an API call to Wikipedia
            // This is a simulated response
            setTimeout(() => {
                const mockResults = [
                    {
                        title: "Artificial Intelligence",
                        summary: "Artificial intelligence (AI) is intelligence demonstrated by machines, as opposed to the natural intelligence displayed by animals including humans.",
                        url: "https://en.wikipedia.org/wiki/Artificial_intelligence"
                    },
                    {
                        title: "Machine Learning",
                        summary: "Machine learning (ML) is the study of computer algorithms that can improve automatically through experience and by the use of data.",
                        url: "https://en.wikipedia.org/wiki/Machine_learning"
                    },
                    {
                        title: "Natural Language Processing",
                        summary: "Natural language processing (NLP) is a subfield of linguistics, computer science, and artificial intelligence concerned with the interactions between computers and human language.",
                        url: "https://en.wikipedia.org/wiki/Natural_language_processing"
                    }
                ];
                
                let html = '<h4 style="color: var(--primary-color); margin-bottom: 15px;">Search Results:</h4>';
                
                mockResults.forEach(result => {
                    html += `
                        <div style="margin-bottom: 15px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <div style="font-weight: bold; color: white; margin-bottom: 5px;">${result.title}</div>
                            <div style="color: var(--gray-color); font-size: 0.9rem; margin-bottom: 10px;">${result.summary}</div>
                            <button onclick="window.open('${result.url}', '_blank')" style="background: none; border: 1px solid var(--primary-color); color: var(--primary-color); padding: 5px 15px; border-radius: 5px; cursor: pointer; font-size: 0.8rem;">Read More</button>
                        </div>
                    `;
                });
                
                resultsDiv.innerHTML = html;
                
                // Also add a message to chat
                addMessage('jarvis', `I found ${mockResults.length} results for "${searchTerm}" on Wikipedia. Check the modal for details.`);
                
            }, 1500);
        }

        // Open feedback modal
        function openFeedbackModal() {
            document.getElementById('feedback-modal').style.display = 'flex';
        }

        // Close feedback modal
        function closeFeedbackModal() {
            document.getElementById('feedback-modal').style.display = 'none';
            document.getElementById('feedback-text').value = '';
            document.getElementById('feedback-email').value = '';
        }

        // Submit feedback
        function submitFeedback() {
            const type = document.getElementById('feedback-type').value;
            const text = document.getElementById('feedback-text').value.trim();
            const email = document.getElementById('feedback-email').value.trim();
            
            if (!text) {
                showNotification("Feedback", "Please enter your feedback", "warning");
                return;
            }
            
            // In a real app, you would send to backend
            console.log("Feedback submitted:", { type, text, email });
            
            closeFeedbackModal();
            showNotification("Feedback", "Thank you for your feedback!", "success");
        }

        // Show notification
        function showNotification(title, message, type = "info") {
            const icon = document.getElementById('notification-icon');
            const notificationTitle = document.getElementById('notification-title');
            const notificationMessage = document.getElementById('notification-message');
            
            // Set icon based on type
            switch(type) {
                case "success":
                    icon.className = "fas fa-check-circle";
                    notification.style.background = "linear-gradient(135deg, var(--success-color), #38b000)";
                    break;
                case "error":
                    icon.className = "fas fa-exclamation-circle";
                    notification.style.background = "linear-gradient(135deg, var(--danger-color), #ef233c)";
                    break;
                case "warning":
                    icon.className = "fas fa-exclamation-triangle";
                    notification.style.background = "linear-gradient(135deg, var(--warning-color), #ff9500)";
                    break;
                default:
                    icon.className = "fas fa-info-circle";
                    notification.style.background = "linear-gradient(135deg, var(--primary-color), var(--secondary-color))";
            }
            
            notificationTitle.textContent = title;
            notificationMessage.textContent = message;
            
            notification.style.display = 'flex';
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                notification.classList.add('hiding');
                setTimeout(() => {
                    notification.style.display = 'none';
                    notification.classList.remove('hiding');
                }, 300);
            }, 5000);
        }

        // Update session time
        function updateSessionTime() {
            const now = new Date();
            const diff = now - sessionStartTime;
            const minutes = Math.floor(diff / 60000);
            
            if (minutes < 60) {
                sessionTimeEl.textContent = `${minutes}m`;
            } else {
                const hours = Math.floor(minutes / 60);
                const remainingMinutes = minutes % 60;
                sessionTimeEl.textContent = `${hours}h ${remainingMinutes}m`;
            }
        }

        // Add to recent activity
        function addRecentActivity(activity) {
            const activityDiv = document.getElementById('recent-activity');
            
            // If it's the placeholder, clear it
            if (activityDiv.innerHTML.includes('No recent activity')) {
                activityDiv.innerHTML = '';
            }
            
            const now = new Date();
            const time = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
            
            const activityItem = document.createElement('div');
            activityItem.className = 'setting-item';
            activityItem.innerHTML = `
                <div>
                    <div class="setting-label">${activity}</div>
                    <div class="setting-description">${time}</div>
                </div>
                <i class="fas fa-chevron-right" style="color: var(--gray-color);"></i>
            `;
            
            // Add to top
            activityDiv.insertBefore(activityItem, activityDiv.firstChild);
            
            // Limit to 5 items
            if (activityDiv.children.length > 5) {
                activityDiv.removeChild(activityDiv.lastChild);
            }
        }

        // Load settings from localStorage
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('jarvis-settings')) || {};
            
            if (settings.voiceSpeed) {
                voiceSpeedSlider.value = settings.voiceSpeed;
                speedValue.textContent = settings.voiceSpeed;
            }
            
            if (settings.voiceVolume) {
                voiceVolumeSlider.value = settings.voiceVolume;
                volumeValue.textContent = settings.voiceVolume + '%';
            }
            
            if (settings.voiceType) {
                voiceTypeSelect.value = settings.voiceType;
            }
            
            if (settings.soundEnabled !== undefined) {
                document.getElementById('sound-toggle').checked = settings.soundEnabled;
            }
            
            if (settings.desktopNotifications !== undefined) {
                document.getElementById('desktop-notifications').checked = settings.desktopNotifications;
            }
            
            if (settings.darkMode !== undefined) {
                document.getElementById('dark-mode').checked = settings.darkMode;
                if (!settings.darkMode) {
                    document.body.style.background = '#f8f9fa';
                    document.body.style.color = '#212529';
                }
            }
            
            if (settings.themeColor) {
                setThemeColor(settings.themeColor, false);
            }
            
            // Load counts
            const data = JSON.parse(localStorage.getItem('jarvis-data')) || {};
            commandsCount = data.commandsCount || 0;
            notesCount = data.notesCount || 0;
            remindersCount = data.remindersCount || 0;
            
            commandsCountEl.textContent = commandsCount;
            notesCountEl.textContent = notesCount;
            remindersCountEl.textContent = remindersCount;
        }

        // Save settings to localStorage
        function saveSettings() {
            const settings = {
                voiceSpeed: voiceSpeedSlider.value,
                voiceVolume: voiceVolumeSlider.value,
                voiceType: voiceTypeSelect.value,
                soundEnabled: document.getElementById('sound-toggle').checked,
                desktopNotifications: document.getElementById('desktop-notifications').checked,
                darkMode: document.getElementById('dark-mode').checked,
                themeColor: document.documentElement.style.getPropertyValue('--primary-color') || '#00b4d8'
            };
            
            localStorage.setItem('jarvis-settings', JSON.stringify(settings));
            
            // Save data
            const data = {
                commandsCount: commandsCount,
                notesCount: notesCount,
                remindersCount: remindersCount
            };
            
            localStorage.setItem('jarvis-data', JSON.stringify(data));
        }

        // Reset settings to defaults
        function resetSettings() {
            if (confirm("Are you sure you want to reset all settings to defaults?")) {
                localStorage.removeItem('jarvis-settings');
                localStorage.removeItem('jarvis-data');
                
                // Reset UI
                voiceSpeedSlider.value = 150;
                speedValue.textContent = '150';
                voiceVolumeSlider.value = 100;
                volumeValue.textContent = '100%';
                voiceTypeSelect.value = 'male';
                document.getElementById('sound-toggle').checked = true;
                document.getElementById('desktop-notifications').checked = false;
                document.getElementById('dark-mode').checked = true;
                
                // Reset theme color
                setThemeColor('#00b4d8');
                
                // Reset counts
                commandsCount = 0;
                notesCount = 0;
                remindersCount = 0;
                commandsCountEl.textContent = '0';
                notesCountEl.textContent = '0';
                remindersCountEl.textContent = '0';
                
                // Reset recent activity
                document.getElementById('recent-activity').innerHTML = 
                    '<div style="color: var(--gray-color); text-align: center; padding: 20px;">No recent activity yet</div>';
                
                showNotification("Settings", "Settings reset to defaults", "success");
            }
        }

        // Set theme color
        function setThemeColor(color, showNotification = true) {
            document.documentElement.style.setProperty('--primary-color', color);
            
            // Adjust secondary color (darker version)
            const darkerColor = shadeColor(color, -30);
            document.documentElement.style.setProperty('--secondary-color', darkerColor);
            
            saveSettings();
            
            if (showNotification) {
                showNotification("Theme", `Theme color changed to ${color}`, "success");
            }
        }

        // Helper function to shade a color
        function shadeColor(color, percent) {
            let R = parseInt(color.substring(1,3),16);
            let G = parseInt(color.substring(3,5),16);
            let B = parseInt(color.substring(5,7),16);

            R = parseInt(R * (100 + percent) / 100);
            G = parseInt(G * (100 + percent) / 100);
            B = parseInt(B * (100 + percent) / 100);

            R = (R<255)?R:255;  
            G = (G<255)?G:255;  
            B = (B<255)?B:255;  

            const RR = ((R.toString(16).length===1)?"0"+R.toString(16):R.toString(16));
            const GG = ((G.toString(16).length===1)?"0"+G.toString(16):G.toString(16));
            const BB = ((B.toString(16).length===1)?"0"+B.toString(16):B.toString(16));

            return "#"+RR+GG+BB;
        }

        // Utility functions
        function getRandomResponse(responses) {
            return responses[Math.floor(Math.random() * responses.length)];
        }

        function getRandomJoke() {
            const jokes = [
                "Why do programmers prefer dark mode? Because light attracts bugs!",
                "Why don't scientists trust atoms? Because they make up everything!",
                "What's a programmer's favorite place to hang out? Foo Bar!",
                "Why did the programmer quit his job? Because he didn't get arrays!",
                "How many programmers does it take to change a light bulb? None, that's a hardware problem!",
                "Why do Java developers wear glasses? Because they don't see sharp!"
            ];
            return jokes[Math.floor(Math.random() * jokes.length)];
        }

        function getRandomFact() {
            const facts = [
                "A day on Venus is longer than a year on Venus.",
                "Honey never spoils. Archaeologists have found pots of honey in ancient Egyptian tombs that are over 3,000 years old and still perfectly good to eat.",
                "The human nose can detect over 1 trillion different smells.",
                "Bananas are berries, but strawberries aren't.",
                "Octopuses have three hearts. Two pump blood to the gills, while the third pumps it to the rest of the body."
            ];
            return facts[Math.floor(Math.random() * facts.length)];
        }

        function calculateExpression(command) {
            try {
                // Extract expression
                let expression = command
                    .replace('calculate', '')
                    .replace('what is', '')
                    .replace('?', '')
                    .trim();
                
                // Convert words to symbols
                expression = expression
                    .replace(/plus/gi, '+')
                    .replace(/minus/gi, '-')
                    .replace(/times/gi, '*')
                    .replace(/multiplied by/gi, '*')
                    .replace(/divided by/gi, '/')
                    .replace(/over/gi, '/');
                
                // Remove any non-math characters
                expression = expression.replace(/[^0-9+\-*/().]/g, '');
                
                if (!expression) {
                    return "I couldn't find a calculation in your request.";
                }
                
                // Use Function constructor for safe evaluation
                const result = Function(`"use strict"; return (${expression})`)();
                
                if (isNaN(result)) {
                    return "I couldn't calculate that. Please check your expression.";
                }
                
                return `The result is ${result}`;
                
            } catch (error) {
                console.error("Calculation error:", error);
                return "I couldn't calculate that. Please try a different expression.";
            }
        }

        // Initialize voice list when voices are loaded
        if (speechSynthesis) {
            speechSynthesis.onvoiceschanged = function() {
                console.log("Voices loaded:", speechSynthesis.getVoices().length);
            };
        }
    </script>
</body>
</html>
